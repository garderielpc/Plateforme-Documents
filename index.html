<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Plateforme Documents</title>
  <style>
    body {
      font-family: Arial;
      margin: 20px;
      background-color: #f4f4f4;
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
    }
    h1 { text-align: center; }
    #admin-login, #admin-section { display: none; text-align: center; margin-top: 20px; }
    iframe { display: block; width: 800px; height: 600px; margin: 20px auto; border: 1px solid #ccc; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    #doc-list { text-align: center; margin-top: 20px; }
    #logoContainer { text-align: center; margin-bottom: 20px; }
    #customLogo { max-height: 150px; }
    #admin-button {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <div id="logoContainer">
    <img id="customLogo" src="" alt="Logo personnalis√©">
  </div>

  <h1>Plateforme de Partage</h1>

  <div id="doc-list"></div>
  <div id="viewer"></div>

  <div id="admin-button">
    <button id="show-login">Acc√®s Administrateur</button>
  </div>

  <div id="admin-login">
    <input type="password" id="admin-password" placeholder="Mot de passe admin">
    <button id="validate-admin">Entrer</button>
  </div>

  <div id="admin-section">
    <h2>Interface Admin</h2>
    <p>Les documents doivent √™tre ajout√©s dans le dossier <strong>/docs</strong> du d√©p√¥t GitHub.</p>

    <div style="margin-top:20px;">
      <label for="logoInput">üìÅ Charger un logo :</label>
      <input type="file" id="logoInput" accept="image/*">
    </div>

    <div style="margin-top:20px;">
      <label for="bgColor">üé® Couleur de fond :</label>
      <input type="color" id="bgColor">
      <label for="bgImage" style="margin-left:20px;">üñºÔ∏è Image de fond :</label>
      <input type="file" id="bgImage" accept="image/*">
    </div>

    <div id="admin-controls"></div>
    <button id="logout-admin">D√©connexion</button>
  </div>

  <script>
    const documents = [
      { name: "Menu d'octobre", url: "docs/menu-octobre.pdf" },
      { name: "Calendrier des activit√©s", url: "docs/calendrier-activites.pdf" },
      { name: "Politique √©ducative", url: "docs/politique-educative.pdf" }
      // Ajoute ici autant de documents que tu veux
    ];

    document.addEventListener("DOMContentLoaded", () => {
      renderList();

      const showLogin = document.getElementById("show-login");
      const validate = document.getElementById("validate-admin");
      const logoutBtn = document.getElementById("logout-admin");

      showLogin.onclick = () => {
        document.getElementById("admin-login").style.display = "block";
      };

      validate.onclick = () => {
        const pwd = document.getElementById("admin-password").value;
        if (pwd === "5920705Dalila") {
          document.getElementById("admin-section").style.display = "block";
          document.getElementById("admin-login").style.display = "none";
          renderAdminControls();
        } else {
          alert("Mot de passe incorrect");
        }
      };

      logoutBtn.onclick = () => {
        document.getElementById("admin-section").style.display = "none";
        document.getElementById("admin-password").value = "";
      };

      document.getElementById("logoInput")?.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
          const logoDataURL = e.target.result;
          document.getElementById("customLogo").src = logoDataURL;
          localStorage.setItem("customLogo", logoDataURL);
        };
        reader.readAsDataURL(file);
      });

      document.getElementById("bgColor")?.addEventListener("input", (e) => {
        const color = e.target.value;
        document.body.style.backgroundColor = color;
        document.body.style.backgroundImage = "";
        localStorage.setItem("backgroundColor", color);
        localStorage.removeItem("backgroundImage");
      });

      document.getElementById("bgImage")?.addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(event) {
          const imageDataURL = event.target.result;
          document.body.style.backgroundImage = `url(${imageDataURL})`;
          document.body.style.backgroundColor = "";
          localStorage.setItem("backgroundImage", imageDataURL);
          localStorage.removeItem("backgroundColor");
        };
        reader.readAsDataURL(file);
      });

      const savedLogo = localStorage.getItem("customLogo");
      if (savedLogo) {
        document.getElementById("customLogo").src = savedLogo;
      }

      const savedImage = localStorage.getItem("backgroundImage");
      const savedColor = localStorage.getItem("backgroundColor");

      if (savedImage) {
        document.body.style.backgroundImage = `url(${savedImage})`;
        document.body.style.backgroundColor = "";
      } else if (savedColor) {
        document.body.style.backgroundColor = savedColor;
        document.body.style.backgroundImage = "";
      }

      function renderList() {
        const list = document.getElementById("doc-list");
        const viewer = document.getElementById("viewer");
        list.innerHTML = "";
        viewer.innerHTML = "";

        documents.forEach((doc) => {
          const btn = document.createElement("button");
          btn.textContent = doc.name;
          btn.onclick = () => {
            viewer.innerHTML = "";
            const wrapper = document.createElement("div");
            wrapper.style.textAlign = "center";

            const iframe = document.createElement("iframe");
            iframe.src = doc.url;

            wrapper.appendChild(iframe);
            viewer.appendChild(wrapper);
          };
          list.appendChild(btn);
        });
      }

      function renderAdminControls() {
        const adminDiv = document.getElementById("admin-controls");
        adminDiv.innerHTML = "";

        documents.forEach((doc) => {
          const div = document.createElement("div");
          div.textContent = doc.name;
          adminDiv.appendChild(div);
        });
      }
    });
  </script>
</body>
</html>
